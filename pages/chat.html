<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title data-i18n="pages.chat.h2">③ 相談・連絡（モック）</title>
    <link rel="stylesheet" href="../assets/css/style.css" />
    <style>
      .chatbox { display:grid; gap:10px; height:60vh; padding:14px; overflow:auto; }
      .bubble { max-width:70%; padding:10px 12px; border-radius:14px; }
      .bot { background:#e3eefc; color:#234; align-self:start; }
      .me { background:#dff6e5; color:#234; align-self:end; }
      .composer { display:flex; gap:8px; }
    </style>
  </head>
  <body>
    <div class="page-header">
      <a class="back" href="../index.html" data-i18n="common.back">← ホームに戻る</a>
      <h2 data-i18n="pages.chat.h2">③ 相談・連絡（モック）</h2>
      <p class="muted" data-i18n="pages.chat.sub">よくある質問の自動回答＋問い合わせフォーム</p>
    </div>

    <main class="container stack">
      <section class="neumorph pad">
        <div class="chatbox" id="chat">
          <div class="bubble bot">こんにちは。旭市商工会 相談botです。どんなご用件でしょうか？（例：補助金、創業、台風時の支援）</div>
        </div>
        <form class="composer" id="composer">
          <input id="msg" placeholder="メッセージを入力…（モック）" />
          <button class="btn primary" type="submit">送信</button>
        </form>
      </section>

      <section class="card">
        <h3>窓口に連絡（営業時間外はbotで一次対応）</h3>
        <div class="stack">
          <div class="row">
            <span class="tag">旭窓口</span><span class="muted">平日 8:30-17:15</span>
          </div>
          <div class="row">
            <a class="btn" href="#">電話（モック）</a>
            <a class="btn" href="#">メールフォーム（モック）</a>
          </div>
        </div>
      </section>
    </main>

    <script src="../assets/js/i18n.js"></script>
    <script>
      const chat = document.getElementById('chat');
      const form = document.getElementById('composer');
      const input = document.getElementById('msg');
      const replies = [
        ['補助金','旭市や千葉県、国の支援制度はこちら（モック）→ ビジネス支援・補助金 をご覧ください。'],
        ['創業','創業計画のテンプレートや専門家相談の予約が可能です（モック）。イベント・セミナーもご確認ください。'],
        ['台風','避難所情報・災害支援は 緊急情報・災害支援 をご覧ください。被災事業者向けの制度もまとめています。']
      ];
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        const text = input.value.trim();
        if(!text) return;
        chat.insertAdjacentHTML('beforeend', `<div class=\"bubble me\">${text}</div>`);
        input.value='';
        setTimeout(()=>{
          const lower = text.toLowerCase();
          const hit = replies.find(([k])=> lower.includes(k.toLowerCase()));
          const msg = hit ? hit[1] : '担当におつなぎします（モック）。返信まで少々お待ちください。';
          chat.insertAdjacentHTML('beforeend', `<div class=\"bubble bot\">${msg}</div>`);
          chat.scrollTop = chat.scrollHeight;
        }, 400);
        chat.scrollTop = chat.scrollHeight;
      });
    </script>
    <footer class="site-footer"><small data-i18n="common.mock">モック表示</small></footer>
  </body>
  </html>
